'use strict';

var locationArray = [
    {
        name: 'Books-a-Million',
        desc: 'Yes because he never did a thing like that before as ask to get his breakfast in bed with a couple of eggs since the City Arms hotel when he used to be pretending to be laid up with a sick voice doing his highness to make himself interesting for that old faggot Mrs Riordan that he thought he had a great leg of and she never left us a farthing all for masses for herself and her soul greatest miser ever was actually afraid to lay out 4d for her methylated spirit telling me all her ailments she had too much old chat in her about politics and earthquakes and the end of the world let us have a bit of fun first God help the world if all the women were her sort down on bathingsuits and lownecks of course nobody wanted her to wear them I suppose she was pious because no man would look at her twice I hope Ill never be like her a wonder she didnt want us to cover our faces but she was a welleducated woman certainly and her gabby talk about Mr Riordan here and Mr Riordan there I suppose he was glad to get shut of her and her dog smelling my fur and always edging to get up under my petticoats especially then still I like that in him polite to old women like that and waiters and beggars too hes not proud out of nothing but not always if ever he got anything really serious the matter with him its much better for them to go into a hospital where everything is clean but I suppose Id have to dring it into him for a month yes and then wed have a hospital nurse next thing on the carpet have him staying there till they throw him out or a nun maybe like the smutty photo he has shes as much a nun as Im not yes because theyre so weak and puling when theyre sick they want a woman to get well if his nose bleeds youd think it was O tragic and that dyinglooking one off the south circular when he sprained his foot at the choir party at the sugarloaf Mountain the day I wore that dress Miss Stack bringing him flowers the worst old ones she could find at the bottom of the basket anything at all to get into a mans bedroom with her old maids voice trying to imagine he was dying on account of her to never see thy face again though he looked more like a man with his beard a bit grown in the bed father was the same besides I hate bandaging and dosing when he cut his toe with the razor paring his corns afraid hed get bloodpoisoning but if it was a thing I was sick then wed see what attention only of course the woman hides it not to give all the trouble they do yes he came somewhere Im sure by his appetite anyway love its not or hed be off his feed thinking of her so either it was one of those night women if it was down there he was really and the hotel story he made up a pack of lies to hide it planning it Hynes kept me who did I meet ah yes I met do you remember Menton and who else who let me see that big babbyface I saw him and he not long married flirting with a young girl at Pooles Myriorama and turned my back on him when he slinked out looking quite conscious what harm but he had the impudence to make up to me one time well done to him mouth almighty and his boiled eyes of all the big stupoes I ever met and thats called a solicitor only for I hate having a long wrangle in bed or else if its not that its some little bitch or other he got in with somewhere or picked up on the sly if they only knew him as well as I do yes because the day before yesterday he was scribbling something a letter when I came into the front room to show him Dignams death in the paper as if something told me and he covered it up with the blottingpaper pretending to be thinking about business so very probably that was it to somebody who thinks she has a softy in him because all men get a bit like that at his age especially getting on to forty he is now so as to wheedle any money she can out of him no fool like an old fool and then the usual kissing my bottom was to hide it not that I care two straws now who he does it with or knew before that way though Id like to find out so long as I dont have the two of them under my nose all the time like that slut that Mary we had in Ontario terrace padding out her false bottom to excite him bad enough to get the smell of those painted women off him once or twice I had a suspicion by getting him to come near me when I found the long hair on his coat without that one when I went into the kitchen pretending he was drinking water 1 woman is not enough for them it was all his fault of course ruining servants then proposing that she could eat at our table on Christmas day if you please O no thank you not in my house stealing my potatoes and the oysters 2/6 per doz going out to see her aunt if you please common robbery so it was but I was sure he had something on with that one it takes me to find out a thing like that he said you have no proof it was her proof O yes her aunt was very fond of oysters but I told her what I thought of her suggesting me to go out to be alone with her I wouldnt lower myself to spy on them the garters I found in her room the Friday she was out that was enough for me a little bit too much her face swelled up on her with temper when I gave her her weeks notice I saw to that better do without them altogether do out the rooms myself quicker only for the damn cooking and throwing out the dirt I gave it to him anyhow either she or me leaves the house I couldnt even touch him if I thought he was with a dirty barefaced liar and sloven like that one denying it up to my face and singing about the place in the W C too because she knew she was too well off yes because he couldnt possibly do without it that long so he must do it somewhere and the last time he came on my bottom when was it the night Boylan gave my hand a great squeeze going along by the Tolka in my hand there steals another I just pressed the back of his like that with my thumb to squeeze back singing the young May moon shes beaming love because he has an idea about him and me hes not such a fool he said Im dining out and going to the Gaiety though Im not going to give him the satisfaction in any case God knows hes a change in a way not to be always and ever wearing the same old hat unless I paid some nicelooking boy to do it since I cant do it myself a young boy would like me Id confuse him a little alone with him if we were Id let him see my garters the new ones and make him turn red looking at him seduce him I know what boys feel with that down on their cheek doing that frigging drawing out the thing by the hour question and answer would you do this that and the other with the coalman yes with a bishop yes I would because I told him about some dean or bishop was sitting beside me in the jews temples gardens when I was knitting that woollen thing a stranger to Dublin what place was it and so on about the monuments and he tired me out with statues encouraging him making him worse than he is who is in your mind now tell me who are you thinking of who is it tell me his name who tell me who the german Emperor is it yes imagine Im him think of him can you feel him trying to make a whore of me what he never will he ought to give it up now at this age of his life simply ruination for any woman and no satisfaction in it pretending to like it till he comes and then finish it off myself anyway and it makes your lips pale anyhow its done now once and for all with all the talk of the world about it people make its only the first time after that its just the ordinary do it and think no more about it why cant you kiss a man without going and marrying him first you sometimes love to wildly when you feel that way so nice all over you you cant help yourself I wish some man or other would take me sometime when hes there and kiss me in his arms theres nothing like a kiss long and hot down to your soul almost paralyses you then I hate that confession when I used to go to Father Corrigan he touched me father and what harm if he did where and I said on the canal bank like a fool but whereabouts on your person my child on the leg behind high up was it yes rather high up was it where you sit down yes O Lord couldnt he say bottom right out and have done with it what has that got to do with it and did you whatever way he put it I forget no father and I always think of the real father what did he want to know for when I already confessed it to God he had a nice fat hand the palm moist always I wouldnt mind feeling it neither would he Id say by the bullneck in his horsecollar I wonder did he know me in the box I could see his face he couldnt see mine of course hed never turn or let on still his eyes were red when his father died theyre lost for a woman of course must be terrible when a man cries let alone them Id like to be embraced by one in his vestments and the smell of incense off him like the pope besides theres no danger with a priest if youre married hes too careful about himself then give something to H H the pope for a penance I wonder was he satisfied with me one thing I didnt like his slapping me behind going away so familiarly in the hall though I laughed Im not a horse or an ass am I I suppose he was thinking of his fathers I wonder is he awake thinking of me or dreaming am I in it who gave him that flower he said he bought he smelt of some kind of drink not whisky or stout or perhaps the sweety kind of paste they stick their bills up with some liqueur Id like to sip those richlooking green and yellow expensive drinks those stagedoor johnnies drink with the opera hats I tasted once with my finger dipped out of that American that had the squirrel talking stamps with father he had all he could do to keep himself from falling asleep after the last time after we took the port and potted meat it had a fine salty taste yes because I felt lovely and tired myself and fell asleep as sound as a top the moment I popped straight into bed till that thunder woke me up God be merciful to us I thought the heavens were coming down about us to punish us when I blessed myself and said a Hail Mary like those awful thunderbolts in Gibraltar as if the world was coming to an end and then they come and tell you theres no God what could you do if it was running and rushing about nothing only make an act of contrition the candle I lit that evening in Whitefriars street chapel for the month of May see it brought its luck though hed scoff if he heard because he never goes to church mass or meeting he says your soul you have no soul inside only grey matter because he doesnt know what it is to have one yes when I lit the lamp because he must have come 3 or 4 times with that tremendous big red brute of a thing he has I thought the vein or whatever the dickens they call it was going to burst though his nose is not so big after I took off all my things with the blinds down after my hours dressing and perfuming and combing it like iron or some kind of a thick crowbar standing all the time he must have eaten oysters I think a few dozen he was in great singing voice no I never in all my life felt anyone had one the size of that to make you feel full up he must have eaten a whole sheep after whats the idea making us like that with a big hole in the middle of us or like a Stallion driving it up into you because thats all they want out of you with that determined vicious look in his eye I had to halfshut my eyes still he hasnt such a tremendous amount of spunk in him when I made him pull out and do it on me considering how big it is so much the better in case any of it wasnt washed out properly the last time I let him finish it in me nice invention they made for women for him to get all the pleasure but if someone gave them a touch of it themselves theyd know what I went through with Milly nobody would believe cutting her teeth too and Mina Purefoys husband give us a swing out of your whiskers filling her up with a child or twins once a year as regular as the clock always with a smell of children off her the one they called budgers or something like a nigger with a shock of hair on it Jesusjack the child is a black the last time I was there a squad of them falling over one another and bawling you couldnt hear your ears supposed to be healthy not satisfied till they have us swollen out like elephants or I dont know what supposing I risked having another not off him though still if he was married Im sure hed have a fine strong child but I dont know Poldy has more spunk in him yes thatd be awfully jolly I suppose it was meeting Josie Powell and the funeral and thinking about me and Boylan set him off well he can think what he likes now if thatll do him any good I know they were spooning a bit when I came on the scene he was dancing and sitting out with her the night of Georgina Simpsons housewarming and then he wanted to ram it down my neck it was on account of not liking to see her a wallflower that was why we had the standup row over politics he began it not me when he said about Our Lord being a carpenter at last he made me cry of course a woman is so sensitive about everything I was fuming with myself after for giving in only for I knew he was gone on me and the first socialist he said He was he annoyed me so much I couldnt put him into a temper still he knows a lot of mixedup things especially about the body and the inside I often wanted to study up that myself what we have inside us in that family physician I could always hear his voice talking when the room was crowded and watch him after that I pretended I had a coolness on with her over him because he used to be a bit on the jealous side whenever he asked who are you going to and I said over to Floey and he made me the present of Byron',
        mapLabel: 'S',
        lat: 27.93233,
        lng: -82.32699
    },
    {
        name: 'The Center of the Universe',
        desc: 'null',
        mapLabel: 'S',
        lat: 27.84804,
        lng: -82.27686
    },
    {
        name: "Haslam's",
        desc: 'null',
        mapLabel: 'R',
        lat: 27.77132,
        lng: -82.66082
    },
    {
        name: 'The Old House',
        desc: 'null',
        mapLabel: 'R',
        lat: 27.7624,
        lng: -82.73724
    },
    {
        name: 'Park Square',
        desc: 'null',
        mapLabel: '0',
        lat: 27.854269,
        lng: -82.210625
    },
    {
        name: 'Paul Sanders Park',
        desc: 'null',
        mapLabel: 'S',
        lat: 27.89425,
        lng: -82.29326
    },
    {
        name: 'Railroad Tracks',
        desc: 'null',
        mapLabel: 'S',
        lat: 27.94627,
        lng: -82.29975
    },
    {
        name: 'Tampa Convention Center',
        desc: 'null',
        mapLabel: 'S',
        lat: 27.9419,
        lng: -82.45652
    },
    {
        name: 'Winthrop Village',
        desc: 'null',
        mapLabel: 'S',
        lat: 27.893256,
        lng: -82.316763
    }
];

var ViewModel = function() {
    var self = this;

    //variables

    this.locations = ko.observableArray(locationArray);
    this.selectedLocation = ko.observable(this.locations()[0]);

    //methods

    this.switchLocation = function(data) {
        self.selectedLocation(data);
    }

    this.centerToMarker = function(data) {
        map.setZoom(13);
        map.panTo({lat: data.lat, lng: data.lng});
    };

    //container function to prevent mapmarker clicks from opening the menu
    this.closeMenu = function() {
        if ($('#slide-menu').hasClass('open')) {
            self.toggleMenu();
        }
    }

    this.toggleMenu = function() {
        $('#slide-menu').slideToggle('fast');
        $('#slide-menu').toggleClass('open');
    };

    this.toggleInfoWindow = function() {
        var $windowWidth = $(window).width();
        var $popup = $('#popup');

        if ($windowWidth <= 440) {
            if ($popup.hasClass('active')) {
                $popup.animate({
                    bottom: '-100vh'
                }, 300);
            } else {
                $popup.animate({
                    bottom: 0
                }, 300);
            }
        } else if ($windowWidth > 440) {
            if ($popup.hasClass('active')) {
                $popup.animate({
                    right: -440
                }, 300);
            } else {
                $popup.animate({
                    right: 0
                }, 300);
            }
        }

        $popup.toggleClass('active');
    };

    //container function for all methods run when a location is clicked
    this.clickLocation = function(data) {
        self.switchLocation(data);
        self.closeMenu();
        self.centerToMarker(data);
        //checks if info window is open before toggling it
        if (!$('#popup').hasClass('active')) {
            self.toggleInfoWindow();
        }
    };
};

var Location = function(data) {
    this.name = data.name;
    this.desc = data.desc;
    this.mapLabel = data.mapLabel;
    this.coordinates = {lat: data.lat, lng: data.lng};
}

//Declare veiwmodel outside of applyBindings so map functions can access it
var my = {vm: null};
window.onload = function() {
    my.vm = new ViewModel();
    ko.applyBindings(my.vm);
};
